<div>

  <h2>Browser</h2>

  Stockage : <b>{{_source==0 ? 'Disque dur' : 'Cloud'}}</b>&nbsp;
  <button nz-button nzType="secondary" (click)="updateNoteList()"><i nz-icon nzType="reload" nzTheme="outline"></i></button>

  <nz-input-group [nzSuffix]="suffixIcon">
    <input type="text" nz-input placeholder="Search" [(ngModel)]="searchValue" />
  </nz-input-group>
  <ng-template #suffixIcon>
    <i nz-icon nzType="search"></i>
  </ng-template>
  <nz-tree 
    [nzData]="nodes" 
    [nzSearchValue]="searchValue"
    nzDraggable
    (nzOnDrop)="nzEvent($event)" 
    (nzClick)="activeNode($event)"
    [nzSelectedKeys]="[selectedKey]"
    (nzDblClick)="openFolder($event)"
    [nzTreeTemplate]="nzTreeTemplate">
  </nz-tree>
  <ng-template #nzTreeTemplate let-node>
    <span class="custom-node" 
        [attr.draggable]="node.origin.isRoot?null:true"
        [attr.aria-grabbed]="node.origin.isRoot?null:true"
        [class.draggable]="node.origin.isRoot?null:true"
        [class.active]="selectedKey === node.key"
        [class.root]="node.origin.isRoot"
        [class.folder]="node.origin.isFolder">
      <span *ngIf="node.origin.isRoot; else notRoot" (contextmenu)="contextMenu($event, menu)">
        <i nz-icon [nzType]="node.origin.key=='local_root' ? 'desktop' : 'global'" (click)="openFolder(node)"></i>
        <span class="folder-name">{{ node.title }}</span>
      </span>
      <ng-template #notRoot>
        <span *ngIf="node.origin.isFolder" (contextmenu)="contextMenu($event, menu)">
          <i nz-icon [nzType]="node.isExpanded ? 'folder-open' : 'folder'" (click)="openFolder(node)"></i>
          <span class="folder-name">{{ node.title }}</span>
          <!-- <span class="folder-desc">created by {{ node?.origin?.author | lowercase }}</span> -->
        </span>
        <span *ngIf="!node.origin.isFolder" (contextmenu)="contextMenu($event, menu)">
          <i nz-icon nzType="file"></i>
          <span class="file-name">{{ node.title }}</span>
          <!-- <span class="file-desc">modified by {{ node?.origin?.author | lowercase }}</span> -->
        </span>
      </ng-template>
    </span>
  </ng-template>
  <nz-dropdown-menu #menu="nzDropdownMenu">
    <ul nz-menu>
      <li nz-menu-item (click)="selectDropdown()">Action 1</li>
      <li nz-menu-item (click)="selectDropdown()">Action 2</li>
    </ul>
  </nz-dropdown-menu>
  <!-- <ul>
    <li *ngFor="let note of _notes" (click)="noteClick(note)">{{ note.title }}</li>
  </ul> -->

</div>